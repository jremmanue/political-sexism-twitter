# -*- coding: utf8 -*-
from gevent import monkey;
monkey.patch_all()

from flask_bootstrap import Bootstrap
import gevent
import os
from flask import Flask, render_template, request
from flask_socketio import SocketIO, emit
from twython import Twython
from config import CONF
from twitterstreamer import TwitterStreamer, TwitterWatchDog

# server side 
# Initialize and configure Flask and SocketIO
app = Flask(__name__)  
Bootstrap(app)
app.config['SECRET_KEY'] = 'secret'  
app.debug = True
socketio = SocketIO(app)

watchDog = TwitterWatchDog()
# routing/mapping a url on website to a python function 
@app.route('/') #root directory, home page of website, called a decorator
def index():
    watchDog.check_alive()
    return render_template("index.html")

@app.route('/map')
def map():
    return render_template("map.html")

 # in terminal handling
@socketio.on('connect', namespace = '/tweets')
def tweets_connect():
    print(' connected on server side')
    wordlist = ['hillary clinton bitch', 'Elizabeth warren bitch']
    # twitter = Twython(CONF['APP_KEY'], CONF['APP_SECRET'], CONF['OAUTH_TOKEN'], CONF['OAUTH_TOKEN_SECRET'])
    # results = twitter.cursor(twitter.search, q=wordlist, lang='en', count='5', result_type = 'recent')
    dummy = {u'contributors': None, u'truncated': False, u'text': u'RT @nwonoway: Sleazy lying 2 FACE backstabbing whore. And yes, she is a whore- she has screwed every one of her constituents \U0001f609\U0001f644\U0001f605\U0001f604\u2026 ', u'is_quote_status': True, u'in_reply_to_status_id': None, u'id': 859126334252957696, u'favorite_count': 0, u'entities': {u'user_mentions': [{u'id': 761396280543350784, u'indices': [3, 12], u'id_str': u'761396280543350784', u'screen_name': u'nwonoway', u'name': u'Jim Stewart'}], u'symbols': [], u'hashtags': [], u'urls': [{u'url': u'', u'indices': [131, 131], u'expanded_url': None}]}, u'quoted_status_id': 858742017521631232, u'retweeted': False, u'coordinates': None, u'timestamp_ms': u'1493666654538', u'quoted_status': {u'contributors': None, u'truncated': True, u'text': u'"I hope they (Trump and his voters) leave their bodies to science. I would like to cut them open" ~ @SenWarren duri\u2026 https://t.co/kGWcJ82aVg', u'is_quote_status': False, u'in_reply_to_status_id': None, u'id': 858742017521631232, u'favorite_count': 2207, u'source': u'<a href="http://twitter.com" rel="nofollow">Twitter Web Client</a>', u'retweeted': False, u'coordinates': None, u'entities': {u'user_mentions': [{u'id': 970207298, u'indices': [100, 110], u'id_str': u'970207298', u'screen_name': u'SenWarren', u'name': u'Elizabeth Warren'}], u'symbols': [], u'hashtags': [], u'urls': [{u'url': u'https://t.co/kGWcJ82aVg', u'indices': [117, 140], u'expanded_url': u'https://twitter.com/i/web/status/858742017521631232', u'display_url': u'twitter.com/i/web/status/8\u2026'}]}, u'in_reply_to_screen_name': None, u'id_str': u'858742017521631232', u'display_text_range': [0, 140], u'retweet_count': 3017, u'in_reply_to_user_id': None, u'favorited': False, u'user': {u'follow_request_sent': None, u'profile_use_background_image': True, u'default_profile_image': False, u'id': 4224729994, u'verified': False, u'profile_image_url_https': u'https://pbs.twimg.com/profile_images/673898503047917569/jAwPmxX1_normal.jpg', u'profile_sidebar_fill_color': u'DDEEF6', u'profile_text_color': u'333333', u'followers_count': 108936, u'profile_sidebar_border_color': u'C0DEED', u'id_str': u'4224729994', u'profile_background_color': u'C0DEED', u'listed_count': 789, u'profile_background_image_url_https': u'https://abs.twimg.com/images/themes/theme1/bg.png', u'utc_offset': -25200, u'statuses_count': 8743, u'description': u'Unofficial Twitter of Tennessee Republicans. Covering breaking news, national politics, foreign policy and more. #MAGA #2A', u'friends_count': 75380, u'location': u'Tennessee, USA', u'profile_link_color': u'1DA1F2', u'profile_image_url': u'http://pbs.twimg.com/profile_images/673898503047917569/jAwPmxX1_normal.jpg', u'following': None, u'geo_enabled': False, u'profile_banner_url': u'https://pbs.twimg.com/profile_banners/4224729994/1485479449', u'profile_background_image_url': u'http://abs.twimg.com/images/themes/theme1/bg.png', u'name': u'Tennessee', u'lang': u'en', u'profile_background_tile': False, u'favourites_count': 1841, u'screen_name': u'TEN_GOP', u'notifications': None, u'url': None, u'created_at': u'Thu Nov 19 07:40:10 +0000 2015', u'contributors_enabled': False, u'time_zone': u'Pacific Time (US & Canada)', u'protected': False, u'default_profile': True, u'is_translator': False}, u'geo': None, u'in_reply_to_user_id_str': None, u'possibly_sensitive': False, u'lang': u'en', u'extended_tweet': {u'display_text_range': [0, 138], u'entities': {u'user_mentions': [{u'id': 970207298, u'indices': [100, 110], u'id_str': u'970207298', u'screen_name': u'SenWarren', u'name': u'Elizabeth Warren'}], u'symbols': [], u'hashtags': [], u'urls': [], u'media': [{u'expanded_url': u'https://twitter.com/TEN_GOP/status/858742017521631232/video/1', u'display_url': u'pic.twitter.com/xlXoOwstTo', u'url': u'https://t.co/xlXoOwstTo', u'media_url_https': u'https://pbs.twimg.com/ext_tw_video_thumb/858739461097754625/pu/img/PUjJ3jAedYfwAl7F.jpg', u'video_info': {u'aspect_ratio': [16, 9], u'duration_millis': 51880, u'variants': [{u'url': u'https://video.twimg.com/ext_tw_video/858739461097754625/pu/vid/1280x720/3dd5efmqLM8TX-Uz.mp4', u'bitrate': 2176000, u'content_type': u'video/mp4'}, {u'url': u'https://video.twimg.com/ext_tw_video/858739461097754625/pu/pl/nM2gz1_nlZHHRfJg.m3u8', u'content_type': u'application/x-mpegURL'}, {u'url': u'https://video.twimg.com/ext_tw_video/858739461097754625/pu/vid/640x360/CSgbDRRUTUmFzP9U.mp4', u'bitrate': 832000, u'content_type': u'video/mp4'}, {u'url': u'https://video.twimg.com/ext_tw_video/858739461097754625/pu/vid/320x180/dbNIGRgfvBgv3UbA.mp4', u'bitrate': 320000, u'content_type': u'video/mp4'}]}, u'id_str': u'858739461097754625', u'sizes': {u'small': {u'h': 191, u'resize': u'fit', u'w': 340}, u'large': {u'h': 576, u'resize': u'fit', u'w': 1024}, u'medium': {u'h': 338, u'resize': u'fit', u'w': 600}, u'thumb': {u'h': 150, u'resize': u'crop', u'w': 150}}, u'indices': [139, 162], u'type': u'video', u'id': 858739461097754625, u'media_url': u'http://pbs.twimg.com/ext_tw_video_thumb/858739461097754625/pu/img/PUjJ3jAedYfwAl7F.jpg'}]}, u'extended_entities': {u'media': [{u'expanded_url': u'https://twitter.com/TEN_GOP/status/858742017521631232/video/1', u'display_url': u'pic.twitter.com/xlXoOwstTo', u'url': u'https://t.co/xlXoOwstTo', u'media_url_https': u'https://pbs.twimg.com/ext_tw_video_thumb/858739461097754625/pu/img/PUjJ3jAedYfwAl7F.jpg', u'video_info': {u'aspect_ratio': [16, 9], u'duration_millis': 51880, u'variants': [{u'url': u'https://video.twimg.com/ext_tw_video/858739461097754625/pu/vid/1280x720/3dd5efmqLM8TX-Uz.mp4', u'bitrate': 2176000, u'content_type': u'video/mp4'}, {u'url': u'https://video.twimg.com/ext_tw_video/858739461097754625/pu/pl/nM2gz1_nlZHHRfJg.m3u8', u'content_type': u'application/x-mpegURL'}, {u'url': u'https://video.twimg.com/ext_tw_video/858739461097754625/pu/vid/640x360/CSgbDRRUTUmFzP9U.mp4', u'bitrate': 832000, u'content_type': u'video/mp4'}, {u'url': u'https://video.twimg.com/ext_tw_video/858739461097754625/pu/vid/320x180/dbNIGRgfvBgv3UbA.mp4', u'bitrate': 320000, u'content_type': u'video/mp4'}]}, u'id_str': u'858739461097754625', u'sizes': {u'small': {u'h': 191, u'resize': u'fit', u'w': 340}, u'large': {u'h': 576, u'resize': u'fit', u'w': 1024}, u'medium': {u'h': 338, u'resize': u'fit', u'w': 600}, u'thumb': {u'h': 150, u'resize': u'crop', u'w': 150}}, u'indices': [139, 162], u'type': u'video', u'id': 858739461097754625, u'media_url': u'http://pbs.twimg.com/ext_tw_video_thumb/858739461097754625/pu/img/PUjJ3jAedYfwAl7F.jpg'}]}, u'full_text': u'"I hope they (Trump and his voters) leave their bodies to science. I would like to cut them open" ~ @SenWarren during an event in Chicago. https://t.co/xlXoOwstTo'}, u'created_at': u'Sun Apr 30 17:57:06 +0000 2017', u'filter_level': u'low', u'in_reply_to_status_id_str': None, u'place': None}, u'source': u'<a href="http://twitter.com" rel="nofollow">Twitter Web Client</a>', u'in_reply_to_screen_name': None, u'id_str': u'859126334252957696', u'retweet_count': 0, u'in_reply_to_user_id': None, u'favorited': False, u'retweeted_status': {u'contributors': None, u'truncated': True, u'text': u'Sleazy lying 2 FACE backstabbing whore. And yes, she is a whore- she has screwed every one of her constituents \U0001f609\U0001f644\U0001f605\U0001f604\u2026 https://t.co/8j5ssqjmZT', u'is_quote_status': True, u'in_reply_to_status_id': None, u'id': 858761790255243264, u'favorite_count': 2, u'entities': {u'user_mentions': [], u'symbols': [], u'hashtags': [], u'urls': [{u'url': u'https://t.co/8j5ssqjmZT', u'indices': [117, 140], u'expanded_url': u'https://twitter.com/i/web/status/858761790255243264', u'display_url': u'twitter.com/i/web/status/8\u2026'}]}, u'quoted_status_id': 858742017521631232, u'retweeted': False, u'coordinates': None, u'quoted_status': {u'contributors': None, u'truncated': True, u'text': u'"I hope they (Trump and his voters) leave their bodies to science. I would like to cut them open" ~ @SenWarren duri\u2026 https://t.co/kGWcJ82aVg', u'is_quote_status': False, u'in_reply_to_status_id': None, u'id': 858742017521631232, u'favorite_count': 2207, u'source': u'<a href="http://twitter.com" rel="nofollow">Twitter Web Client</a>', u'retweeted': False, u'coordinates': None, u'entities': {u'user_mentions': [{u'id': 970207298, u'indices': [100, 110], u'id_str': u'970207298', u'screen_name': u'SenWarren', u'name': u'Elizabeth Warren'}], u'symbols': [], u'hashtags': [], u'urls': [{u'url': u'https://t.co/kGWcJ82aVg', u'indices': [117, 140], u'expanded_url': u'https://twitter.com/i/web/status/858742017521631232', u'display_url': u'twitter.com/i/web/status/8\u2026'}]}, u'in_reply_to_screen_name': None, u'id_str': u'858742017521631232', u'display_text_range': [0, 140], u'retweet_count': 3017, u'in_reply_to_user_id': None, u'favorited': False, u'user': {u'follow_request_sent': None, u'profile_use_background_image': True, u'default_profile_image': False, u'id': 4224729994, u'verified': False, u'profile_image_url_https': u'https://pbs.twimg.com/profile_images/673898503047917569/jAwPmxX1_normal.jpg', u'profile_sidebar_fill_color': u'DDEEF6', u'profile_text_color': u'333333', u'followers_count': 108936, u'profile_sidebar_border_color': u'C0DEED', u'id_str': u'4224729994', u'profile_background_color': u'C0DEED', u'listed_count': 789, u'profile_background_image_url_https': u'https://abs.twimg.com/images/themes/theme1/bg.png', u'utc_offset': -25200, u'statuses_count': 8743, u'description': u'Unofficial Twitter of Tennessee Republicans. Covering breaking news, national politics, foreign policy and more. #MAGA #2A', u'friends_count': 75380, u'location': u'Tennessee, USA', u'profile_link_color': u'1DA1F2', u'profile_image_url': u'http://pbs.twimg.com/profile_images/673898503047917569/jAwPmxX1_normal.jpg', u'following': None, u'geo_enabled': False, u'profile_banner_url': u'https://pbs.twimg.com/profile_banners/4224729994/1485479449', u'profile_background_image_url': u'http://abs.twimg.com/images/themes/theme1/bg.png', u'name': u'Tennessee', u'lang': u'en', u'profile_background_tile': False, u'favourites_count': 1841, u'screen_name': u'TEN_GOP', u'notifications': None, u'url': None, u'created_at': u'Thu Nov 19 07:40:10 +0000 2015', u'contributors_enabled': False, u'time_zone': u'Pacific Time (US & Canada)', u'protected': False, u'default_profile': True, u'is_translator': False}, u'geo': None, u'in_reply_to_user_id_str': None, u'possibly_sensitive': False, u'lang': u'en', u'extended_tweet': {u'display_text_range': [0, 138], u'entities': {u'user_mentions': [{u'id': 970207298, u'indices': [100, 110], u'id_str': u'970207298', u'screen_name': u'SenWarren', u'name': u'Elizabeth Warren'}], u'symbols': [], u'hashtags': [], u'urls': [], u'media': [{u'expanded_url': u'https://twitter.com/TEN_GOP/status/858742017521631232/video/1', u'display_url': u'pic.twitter.com/xlXoOwstTo', u'url': u'https://t.co/xlXoOwstTo', u'media_url_https': u'https://pbs.twimg.com/ext_tw_video_thumb/858739461097754625/pu/img/PUjJ3jAedYfwAl7F.jpg', u'video_info': {u'aspect_ratio': [16, 9], u'duration_millis': 51880, u'variants': [{u'url': u'https://video.twimg.com/ext_tw_video/858739461097754625/pu/vid/1280x720/3dd5efmqLM8TX-Uz.mp4', u'bitrate': 2176000, u'content_type': u'video/mp4'}, {u'url': u'https://video.twimg.com/ext_tw_video/858739461097754625/pu/pl/nM2gz1_nlZHHRfJg.m3u8', u'content_type': u'application/x-mpegURL'}, {u'url': u'https://video.twimg.com/ext_tw_video/858739461097754625/pu/vid/640x360/CSgbDRRUTUmFzP9U.mp4', u'bitrate': 832000, u'content_type': u'video/mp4'}, {u'url': u'https://video.twimg.com/ext_tw_video/858739461097754625/pu/vid/320x180/dbNIGRgfvBgv3UbA.mp4', u'bitrate': 320000, u'content_type': u'video/mp4'}]}, u'id_str': u'858739461097754625', u'sizes': {u'small': {u'h': 191, u'resize': u'fit', u'w': 340}, u'large': {u'h': 576, u'resize': u'fit', u'w': 1024}, u'medium': {u'h': 338, u'resize': u'fit', u'w': 600}, u'thumb': {u'h': 150, u'resize': u'crop', u'w': 150}}, u'indices': [139, 162], u'type': u'video', u'id': 858739461097754625, u'media_url': u'http://pbs.twimg.com/ext_tw_video_thumb/858739461097754625/pu/img/PUjJ3jAedYfwAl7F.jpg'}]}, u'extended_entities': {u'media': [{u'expanded_url': u'https://twitter.com/TEN_GOP/status/858742017521631232/video/1', u'display_url': u'pic.twitter.com/xlXoOwstTo', u'url': u'https://t.co/xlXoOwstTo', u'media_url_https': u'https://pbs.twimg.com/ext_tw_video_thumb/858739461097754625/pu/img/PUjJ3jAedYfwAl7F.jpg', u'video_info': {u'aspect_ratio': [16, 9], u'duration_millis': 51880, u'variants': [{u'url': u'https://video.twimg.com/ext_tw_video/858739461097754625/pu/vid/1280x720/3dd5efmqLM8TX-Uz.mp4', u'bitrate': 2176000, u'content_type': u'video/mp4'}, {u'url': u'https://video.twimg.com/ext_tw_video/858739461097754625/pu/pl/nM2gz1_nlZHHRfJg.m3u8', u'content_type': u'application/x-mpegURL'}, {u'url': u'https://video.twimg.com/ext_tw_video/858739461097754625/pu/vid/640x360/CSgbDRRUTUmFzP9U.mp4', u'bitrate': 832000, u'content_type': u'video/mp4'}, {u'url': u'https://video.twimg.com/ext_tw_video/858739461097754625/pu/vid/320x180/dbNIGRgfvBgv3UbA.mp4', u'bitrate': 320000, u'content_type': u'video/mp4'}]}, u'id_str': u'858739461097754625', u'sizes': {u'small': {u'h': 191, u'resize': u'fit', u'w': 340}, u'large': {u'h': 576, u'resize': u'fit', u'w': 1024}, u'medium': {u'h': 338, u'resize': u'fit', u'w': 600}, u'thumb': {u'h': 150, u'resize': u'crop', u'w': 150}}, u'indices': [139, 162], u'type': u'video', u'id': 858739461097754625, u'media_url': u'http://pbs.twimg.com/ext_tw_video_thumb/858739461097754625/pu/img/PUjJ3jAedYfwAl7F.jpg'}]}, u'full_text': u'"I hope they (Trump and his voters) leave their bodies to science. I would like to cut them open" ~ @SenWarren during an event in Chicago. https://t.co/xlXoOwstTo'}, u'created_at': u'Sun Apr 30 17:57:06 +0000 2017', u'filter_level': u'low', u'in_reply_to_status_id_str': None, u'place': None}, u'source': u'<a href="http://twitter.com/download/android" rel="nofollow">Twitter for Android</a>', u'in_reply_to_screen_name': None, u'id_str': u'858761790255243264', u'display_text_range': [0, 140], u'retweet_count': 3, u'in_reply_to_user_id': None, u'favorited': False, u'user': {u'follow_request_sent': None, u'profile_use_background_image': True, u'default_profile_image': False, u'id': 761396280543350784, u'verified': False, u'profile_image_url_https': u'https://pbs.twimg.com/profile_images/849664049101103104/KGoTLeuP_normal.jpg', u'profile_sidebar_fill_color': u'DDEEF6', u'profile_text_color': u'333333', u'followers_count': 2171, u'profile_sidebar_border_color': u'C0DEED', u'id_str': u'761396280543350784', u'profile_background_color': u'F5F8FA', u'listed_count': 58, u'profile_background_image_url_https': u'', u'utc_offset': None, u'statuses_count': 25640, u'description': u'U.S. NO LONGER LAND OF FREE #TerabytesForTermLimits 911 Inside Job PROVEN  #OathKeeper #obomboyspyforprison #killaryforprison Army Vet=UNPRIVILEGED BELLIGERENT', u'friends_count': 2607, u'location': None, u'profile_link_color': u'1DA1F2', u'profile_image_url': u'http://pbs.twimg.com/profile_images/849664049101103104/KGoTLeuP_normal.jpg', u'following': None, u'geo_enabled': False, u'profile_banner_url': u'https://pbs.twimg.com/profile_banners/761396280543350784/1479492693', u'profile_background_image_url': u'', u'name': u'Jim Stewart', u'lang': u'en', u'profile_background_tile': False, u'favourites_count': 54089, u'screen_name': u'nwonoway', u'notifications': None, u'url': None, u'created_at': u'Fri Aug 05 02:59:54 +0000 2016', u'contributors_enabled': False, u'time_zone': None, u'protected': False, u'default_profile': True, u'is_translator': False}, u'geo': None, u'in_reply_to_user_id_str': None, u'possibly_sensitive': False, u'lang': u'en', u'extended_tweet': {u'display_text_range': [0, 117], u'entities': {u'user_mentions': [], u'symbols': [], u'hashtags': [], u'urls': [{u'url': u'https://t.co/iC5mhiNLD5', u'indices': [118, 141], u'expanded_url': u'https://twitter.com/TEN_GOP/status/858742017521631232', u'display_url': u'twitter.com/TEN_GOP/status\u2026'}]}, u'full_text': u'Sleazy lying 2 FACE backstabbing whore. And yes, she is a whore- she has screwed every one of her constituents \U0001f609\U0001f644\U0001f605\U0001f604\U0001f603\U0001f602 https://t.co/iC5mhiNLD5'}, u'created_at': u'Sun Apr 30 19:15:40 +0000 2017', u'quoted_status_id_str': u'858742017521631232', u'filter_level': u'low', u'in_reply_to_status_id_str': None, u'place': None}, u'user': {u'follow_request_sent': None, u'profile_use_background_image': False, u'default_profile_image': False, u'id': 885445418, u'verified': False, u'profile_image_url_https': u'https://pbs.twimg.com/profile_images/820306127149666305/htVrixsq_normal.jpg', u'profile_sidebar_fill_color': u'000000', u'profile_text_color': u'000000', u'followers_count': 1091, u'profile_sidebar_border_color': u'000000', u'id_str': u'885445418', u'profile_background_color': u'000000', u'listed_count': 115, u'profile_background_image_url_https': u'https://abs.twimg.com/images/themes/theme1/bg.png', u'utc_offset': -25200, u'statuses_count': 46052, u'description': u'Staying Off Grid When \u201cNearly Everything Is Chipped, Almost Everything Is Tracked\u201d', u'friends_count': 775, u'location': u'Coeurdalene ID', u'profile_link_color': u'3B94D9', u'profile_image_url': u'http://pbs.twimg.com/profile_images/820306127149666305/htVrixsq_normal.jpg', u'following': None, u'geo_enabled': True, u'profile_banner_url': u'https://pbs.twimg.com/profile_banners/885445418/1473205143', u'profile_background_image_url': u'http://abs.twimg.com/images/themes/theme1/bg.png', u'name': u'Look Into Past 2 see', u'lang': u'en', u'profile_background_tile': False, u'favourites_count': 986, u'screen_name': u'TradeBarter4Win', u'notifications': None, u'url': u'https://www.youtube.com/watch?v=A5ioP-hV2E8&t=1s', u'created_at': u'Tue Oct 16 22:22:45 +0000 2012', u'contributors_enabled': False, u'time_zone': u'Pacific Time (US & Canada)', u'protected': False, u'default_profile': False, u'is_translator': False}, u'geo': None, u'in_reply_to_user_id_str': None, u'lang': u'en', u'created_at': u'Mon May 01 19:24:14 +0000 2017', u'quoted_status_id_str': u'858742017521631232', u'filter_level': u'low', u'in_reply_to_status_id_str': None, u'place': None}
    emit('tweet', dummy, broadcast=True)
    dummy2 = {u'contributors': None, u'truncated': False, u'text': u"Hey @IvankaTrump, how's all that tireless advocating for women and girls working out for you? Fucking bitch. https://t.co/uEeTvXVLoo", u'is_quote_status': True, u'in_reply_to_status_id': None, u'id': 859153008659189761, u'favorite_count': 0, u'entities': {u'user_mentions': [{u'id': 52544275, u'indices': [4, 16], u'id_str': u'52544275', u'screen_name': u'IvankaTrump', u'name': u'Ivanka Trump'}], u'symbols': [], u'hashtags': [], u'urls': [{u'url': u'https://t.co/uEeTvXVLoo', u'indices': [109, 132], u'expanded_url': u'https://twitter.com/CNNPolitics/status/859097761597313024', u'display_url': u'twitter.com/CNNPolitics/st\u2026'}]}, u'quoted_status_id': 859097761597313024, u'retweeted': False, u'coordinates': None, u'timestamp_ms': u'1493673014212', u'quoted_status': {u'contributors': None, u'truncated': True, u'text': u'First on CNN: The Trump administration is ending Michelle Obama\u2019s \u201cLet Girls Learn\u201d education program\u2026 https://t.co/bdK3KXtHfH', u'is_quote_status': False, u'in_reply_to_status_id': None, u'id': 859097761597313024, u'favorite_count': 187, u'source': u'<a href="https://www.sprinklr.com" rel="nofollow">Sprinklr</a>', u'retweeted': False, u'coordinates': None, u'entities': {u'user_mentions': [], u'symbols': [], u'hashtags': [], u'urls': [{u'url': u'https://t.co/bdK3KXtHfH', u'indices': [103, 126], u'expanded_url': u'https://twitter.com/i/web/status/859097761597313024', u'display_url': u'twitter.com/i/web/status/8\u2026'}]}, u'in_reply_to_screen_name': None, u'id_str': u'859097761597313024', u'display_text_range': [0, 140], u'retweet_count': 274, u'in_reply_to_user_id': None, u'favorited': False, u'user': {u'follow_request_sent': None, u'profile_use_background_image': True, u'default_profile_image': False, u'id': 13850422, u'verified': True, u'profile_image_url_https': u'https://pbs.twimg.com/profile_images/809719067682762752/qBgXRChB_normal.jpg', u'profile_sidebar_fill_color': u'F1F5E7', u'profile_text_color': u'000000', u'followers_count': 1964407, u'profile_sidebar_border_color': u'FFFFFF', u'id_str': u'13850422', u'profile_background_color': u'100F14', u'listed_count': 12548, u'profile_background_image_url_https': u'https://pbs.twimg.com/profile_background_images/591311847145406464/NVCpyjyz.png', u'utc_offset': -14400, u'statuses_count': 88379, u'description': u"Political news, campaign stories and Washington coverage from CNN's political team.", u'friends_count': 326, u'location': u'Washington, D.C.', u'profile_link_color': u'0000FF', u'profile_image_url': u'http://pbs.twimg.com/profile_images/809719067682762752/qBgXRChB_normal.jpg', u'following': None, u'geo_enabled': False, u'profile_banner_url': u'https://pbs.twimg.com/profile_banners/13850422/1493594483', u'profile_background_image_url': u'http://pbs.twimg.com/profile_background_images/591311847145406464/NVCpyjyz.png', u'name': u'CNN Politics', u'lang': u'en', u'profile_background_tile': True, u'favourites_count': 8, u'screen_name': u'CNNPolitics', u'notifications': None, u'url': u'http://cnn.com/politics', u'created_at': u'Sat Feb 23 03:12:49 +0000 2008', u'contributors_enabled': False, u'time_zone': u'Eastern Time (US & Canada)', u'protected': False, u'default_profile': False, u'is_translator': False}, u'geo': None, u'in_reply_to_user_id_str': None, u'possibly_sensitive': False, u'lang': u'en', u'extended_tweet': {u'display_text_range': [0, 125], u'entities': {u'user_mentions': [], u'symbols': [], u'hashtags': [], u'urls': [{u'url': u'https://t.co/PSYS6fCPA0', u'indices': [102, 125], u'expanded_url': u'http://cnn.it/2p1D4lt', u'display_url': u'cnn.it/2p1D4lt'}], u'media': [{u'expanded_url': u'https://twitter.com/CNNPolitics/status/859097761597313024/photo/1', u'display_url': u'pic.twitter.com/RbE8H9XbeM', u'url': u'https://t.co/RbE8H9XbeM', u'media_url_https': u'https://pbs.twimg.com/media/C-wg3FDWAAAdIHd.jpg', u'id_str': u'859097759542018048', u'sizes': {u'large': {u'h': 576, u'resize': u'fit', u'w': 1024}, u'small': {u'h': 383, u'resize': u'fit', u'w': 680}, u'medium': {u'h': 576, u'resize': u'fit', u'w': 1024}, u'thumb': {u'h': 150, u'resize': u'crop', u'w': 150}}, u'indices': [126, 149], u'type': u'photo', u'id': 859097759542018048, u'media_url': u'http://pbs.twimg.com/media/C-wg3FDWAAAdIHd.jpg'}]}, u'extended_entities': {u'media': [{u'expanded_url': u'https://twitter.com/CNNPolitics/status/859097761597313024/photo/1', u'display_url': u'pic.twitter.com/RbE8H9XbeM', u'url': u'https://t.co/RbE8H9XbeM', u'media_url_https': u'https://pbs.twimg.com/media/C-wg3FDWAAAdIHd.jpg', u'id_str': u'859097759542018048', u'sizes': {u'large': {u'h': 576, u'resize': u'fit', u'w': 1024}, u'small': {u'h': 383, u'resize': u'fit', u'w': 680}, u'medium': {u'h': 576, u'resize': u'fit', u'w': 1024}, u'thumb': {u'h': 150, u'resize': u'crop', u'w': 150}}, u'indices': [126, 149], u'type': u'photo', u'id': 859097759542018048, u'media_url': u'http://pbs.twimg.com/media/C-wg3FDWAAAdIHd.jpg'}]}, u'full_text': u'First on CNN: The Trump administration is ending Michelle Obama\u2019s \u201cLet Girls Learn\u201d education program https://t.co/PSYS6fCPA0 https://t.co/RbE8H9XbeM'}, u'created_at': u'Mon May 01 17:30:42 +0000 2017', u'filter_level': u'low', u'in_reply_to_status_id_str': None, u'place': None}, u'source': u'<a href="http://twitter.com" rel="nofollow">Twitter Web Client</a>', u'in_reply_to_screen_name': None, u'id_str': u'859153008659189761', u'display_text_range': [0, 108], u'retweet_count': 0, u'in_reply_to_user_id': None, u'favorited': False, u'user': {u'follow_request_sent': None, u'profile_use_background_image': True, u'default_profile_image': False, u'id': 122244501, u'verified': False, u'profile_image_url_https': u'https://pbs.twimg.com/profile_images/721555468573937664/CaPsk4E-_normal.jpg', u'profile_sidebar_fill_color': u'000000', u'profile_text_color': u'000000', u'followers_count': 412, u'profile_sidebar_border_color': u'FFFFFF', u'id_str': u'122244501', u'profile_background_color': u'131516', u'listed_count': 19, u'profile_background_image_url_https': u'https://abs.twimg.com/images/themes/theme14/bg.gif', u'utc_offset': -14400, u'statuses_count': 12321, u'description': u'Art Director. Curious person. Forever nasty. Proud snowflake. Believes in aliens and SCIENCE! Loves #TheExpanse Brooklyn. Persisting.', u'friends_count': 688, u'location': u'Brooklyn, NY', u'profile_link_color': u'16AD1E', u'profile_image_url': u'http://pbs.twimg.com/profile_images/721555468573937664/CaPsk4E-_normal.jpg', u'following': None, u'geo_enabled': True, u'profile_banner_url': u'https://pbs.twimg.com/profile_banners/122244501/1465351476', u'profile_background_image_url': u'http://abs.twimg.com/images/themes/theme14/bg.gif', u'name': u'nancy k.', u'lang': u'en', u'profile_background_tile': True, u'favourites_count': 15791, u'screen_name': u'mizenkay', u'notifications': None, u'url': u'http://Instagram.com/mizenkay', u'created_at': u'Fri Mar 12 02:38:12 +0000 2010', u'contributors_enabled': False, u'time_zone': u'Eastern Time (US & Canada)', u'protected': False, u'default_profile': False, u'is_translator': False}, u'geo': None, u'in_reply_to_user_id_str': None, u'possibly_sensitive': False, u'lang': u'en', u'created_at': u'Mon May 01 21:10:14 +0000 2017', u'quoted_status_id_str': u'859097761597313024', u'filter_level': u'low', u'in_reply_to_status_id_str': None, u'place': None}
    emit('tweet', dummy2, broadcast=True)
    dummy3 = {u'contributors': None, u'truncated': True, u'text': u".@IvankaTrump This ain't Baghdad, bitch. @OfficeGovEthics AMERICA DID NOT ELECT HER, GET HER TF OUT OF THE WHITE HO\u2026 https://t.co/OrmiwjorhM", u'is_quote_status': True, u'in_reply_to_status_id': None, u'id': 859436003190353925, u'favorite_count': 0, u'entities': {u'user_mentions': [{u'id': 52544275, u'indices': [1, 13], u'id_str': u'52544275', u'screen_name': u'IvankaTrump', u'name': u'Ivanka Trump'}, {u'id': 1357975226, u'indices': [41, 57], u'id_str': u'1357975226', u'screen_name': u'OfficeGovEthics', u'name': u'U.S. OGE'}], u'symbols': [], u'hashtags': [], u'urls': [{u'url': u'https://t.co/OrmiwjorhM', u'indices': [117, 140], u'expanded_url': u'https://twitter.com/i/web/status/859436003190353925', u'display_url': u'twitter.com/i/web/status/8\u2026'}]}, u'quoted_status_id': 859435311474102272, u'retweeted': False, u'coordinates': None, u'timestamp_ms': u'1493740485366', u'quoted_status': {u'contributors': None, u'truncated': False, u'text': u"Ivanka Trump\u2019s West Wing Agenda - She's now running the nation. I can't stand her. Unelected and unwanted. https://t.co/uTcEN4ao56", u'is_quote_status': False, u'in_reply_to_status_id': None, u'id': 859435311474102272, u'favorite_count': 19, u'source': u'<a href="http://twitter.com" rel="nofollow">Twitter Web Client</a>', u'retweeted': False, u'coordinates': None, u'entities': {u'user_mentions': [], u'symbols': [], u'hashtags': [], u'urls': [{u'url': u'https://t.co/uTcEN4ao56', u'indices': [107, 130], u'expanded_url': u'https://nyti.ms/2prlRo5', u'display_url': u'nyti.ms/2prlRo5'}]}, u'in_reply_to_screen_name': None, u'id_str': u'859435311474102272', u'retweet_count': 10, u'in_reply_to_user_id': None, u'favorited': False, u'user': {u'follow_request_sent': None, u'profile_use_background_image': False, u'default_profile_image': False, u'id': 4917092018, u'verified': False, u'profile_image_url_https': u'https://pbs.twimg.com/profile_images/823045327120900097/ztxhcfx3_normal.jpg', u'profile_sidebar_fill_color': u'000000', u'profile_text_color': u'000000', u'followers_count': 65183, u'profile_sidebar_border_color': u'000000', u'id_str': u'4917092018', u'profile_background_color': u'000000', u'listed_count': 726, u'profile_background_image_url_https': u'https://abs.twimg.com/images/themes/theme1/bg.png', u'utc_offset': -25200, u'statuses_count': 162603, u'description': u'#TheResistance #FearNothing FreedomMarch in June -- follow @OlgaNYC1211 for details! #TrumpRussia Demand the Truth! / @MikeFarb1 for #UnhackTheVote', u'friends_count': 12414, u'location': u'Colorado, USA', u'profile_link_color': u'1B95E0', u'profile_image_url': u'http://pbs.twimg.com/profile_images/823045327120900097/ztxhcfx3_normal.jpg', u'following': None, u'geo_enabled': True, u'profile_banner_url': u'https://pbs.twimg.com/profile_banners/4917092018/1493384498', u'profile_background_image_url': u'http://abs.twimg.com/images/themes/theme1/bg.png', u'name': u'Robin', u'lang': u'en', u'profile_background_tile': False, u'favourites_count': 247213, u'screen_name': u'puppymnkey', u'notifications': None, u'url': u'http://www.investigatetreason.com', u'created_at': u'Tue Feb 16 18:24:23 +0000 2016', u'contributors_enabled': False, u'time_zone': u'Pacific Time (US & Canada)', u'protected': False, u'default_profile': False, u'is_translator': False}, u'geo': None, u'in_reply_to_user_id_str': None, u'possibly_sensitive': False, u'lang': u'en', u'created_at': u'Tue May 02 15:52:00 +0000 2017', u'filter_level': u'low', u'in_reply_to_status_id_str': None, u'place': None}, u'source': u'<a href="http://twitter.com" rel="nofollow">Twitter Web Client</a>', u'in_reply_to_screen_name': None, u'id_str': u'859436003190353925', u'display_text_range': [0, 140], u'retweet_count': 0, u'in_reply_to_user_id': None, u'favorited': False, u'user': {u'follow_request_sent': None, u'profile_use_background_image': False, u'default_profile_image': False, u'id': 354256094, u'verified': False, u'profile_image_url_https': u'https://pbs.twimg.com/profile_images/845233189853515776/8r4w1ks0_normal.jpg', u'profile_sidebar_fill_color': u'000000', u'profile_text_color': u'000000', u'followers_count': 970, u'profile_sidebar_border_color': u'000000', u'id_str': u'354256094', u'profile_background_color': u'000000', u'listed_count': 27, u'profile_background_image_url_https': u'https://abs.twimg.com/images/themes/theme1/bg.png', u'utc_offset': None, u'statuses_count': 38260, u'description': u'Strong mind, strong body, soft heart #resist', u'friends_count': 690, u'location': u'Louisville KY', u'profile_link_color': u'981CEB', u'profile_image_url': u'http://pbs.twimg.com/profile_images/845233189853515776/8r4w1ks0_normal.jpg', u'following': None, u'geo_enabled': True, u'profile_banner_url': u'https://pbs.twimg.com/profile_banners/354256094/1489624023', u'profile_background_image_url': u'http://abs.twimg.com/images/themes/theme1/bg.png', u'name': u'Bad Samaritan', u'lang': u'en', u'profile_background_tile': False, u'favourites_count': 193980, u'screen_name': u'badsamaritan121', u'notifications': None, u'url': None, u'created_at': u'Sat Aug 13 12:00:53 +0000 2011', u'contributors_enabled': False, u'time_zone': None, u'protected': False, u'default_profile': False, u'is_translator': False}, u'geo': None, u'in_reply_to_user_id_str': None, u'possibly_sensitive': False, u'lang': u'en', u'extended_tweet': {u'display_text_range': [0, 120], u'entities': {u'user_mentions': [{u'id': 52544275, u'indices': [1, 13], u'id_str': u'52544275', u'screen_name': u'IvankaTrump', u'name': u'Ivanka Trump'}, {u'id': 1357975226, u'indices': [41, 57], u'id_str': u'1357975226', u'screen_name': u'OfficeGovEthics', u'name': u'U.S. OGE'}], u'symbols': [], u'hashtags': [], u'urls': [{u'url': u'https://t.co/HHvPKjoWyU', u'indices': [121, 144], u'expanded_url': u'https://twitter.com/puppymnkey/status/859435311474102272', u'display_url': u'twitter.com/puppymnkey/sta\u2026'}]}, u'full_text': u".@IvankaTrump This ain't Baghdad, bitch. @OfficeGovEthics AMERICA DID NOT ELECT HER, GET HER TF OUT OF THE WHITE HOUSE!! https://t.co/HHvPKjoWyU"}, u'created_at': u'Tue May 02 15:54:45 +0000 2017', u'quoted_status_id_str': u'859435311474102272', u'filter_level': u'low', u'in_reply_to_status_id_str': None, u'place': None}
    emit('tweet', dummy3, broadcast=True)
    watchDog.check_alive()
    while True:
        try:
            tweet = watchDog.streamer.queue.get(timeout=5)
        except gevent.queue.Empty:
            watchDog.check_alive()
        else:
            emit('tweet', tweet, broadcast=True)

@socketio.on('disconnect', namespace = '/tweets')
def tweets_disconnect():
    watchDog.check_alive()
    print('server disconnected')

@app.route('/about')
def about():
    return render_template("about.html")




   
if __name__ == "__main__": #only start web server if this file is called directly  
    try:
        port = int(os.environ.get('PORT', 5000)) 
        socketio.run(app, host='0.0.0.0', port = port)
    except KeyboardInterrupt:
        pass